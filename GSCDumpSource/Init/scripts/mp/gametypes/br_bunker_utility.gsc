// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    playerprestreamrespawnorigin();
    playerreadytospawn();
    playerpulloutofgulagwin();
    playerzombiehud();
    scripts\engine\scriptable::_id_11CDB( "maphint_keypad_bunker_interior", ::relic_amped_show_timer );
    scripts\engine\scriptable::_id_11CDB( "maphint_stadium_keypad", ::relic_amped_show_timer );
}

#using_animtree("animated_props");

playerprestreamrespawnorigin()
{
    level.scr_animtree["bunker_door"] = #animtree;
    level.scr_anim["bunker_door"]["door_open"] = %mp_verdansk_bunkerdoor_open;
    level.scr_animname["bunker_door"]["door_open"] = "mp_verdansk_bunkerdoor_open";
    level.scr_anim["bunker_door"]["door_open_puzzle"] = %mp_verdansk_bunkerdoor_open_puzzle;
    level.scr_animname["bunker_door"]["door_open_puzzle"] = "mp_verdansk_bunkerdoor_open_puzzle";
}

playerreadytospawn()
{
    level._effect["vfx_br_bunker_open"] = loadfx( "vfx/iw8_br/gameplay/bunker/vfx_br_bunker_open.vfx" );
    level._effect["vfx_br_bunker_open_2"] = loadfx( "vfx/iw8_br/gameplay/bunker/vfx_br_bunker_open_2.vfx" );
    level._effect["vfx_br_bunker_open_puzzle"] = loadfx( "vfx/iw8_br/gameplay/bunker/vfx_br_bunker_open_puzzle.vfx" );
    level._effect["vfx_br_bulb_lensflare_green"] = loadfx( "vfx/iw8_br/gen_amb/vfx_br_bulb_lensflare_green.vfx" );
    level._effect["vfx_br_bulb_lensflare_red"] = loadfx( "vfx/iw8_br/gen_amb/vfx_br_bulb_lensflare_red.vfx" );
    level._effect["vfx_br_bunker_screen_crashed"] = loadfx( "vfx/iw8_br/gameplay/bunker/vfx_br_bunker_screen_crashed.vfx" );
    level._effect["vfx_br_bunker_screen_rebooting"] = loadfx( "vfx/iw8_br/gameplay/bunker/vfx_br_bunker_screen_rebooting.vfx" );
    level._effect["vfx_br_bunker_screen_ready"] = loadfx( "vfx/iw8_br/gameplay/bunker/vfx_br_bunker_screen_ready.vfx" );
    level._effect["vfx_br_bunker_screen_crashed2"] = loadfx( "vfx/iw8_br/gameplay/bunker/vfx_br_bunker_screen_crashed2.vfx" );
    level._effect["vfx_br_bunker_screen_rebooting2"] = loadfx( "vfx/iw8_br/gameplay/bunker/vfx_br_bunker_screen_rebooting2.vfx" );
    level._effect["vfx_br_bunker_screen_countdown"] = loadfx( "vfx/iw8_br/gameplay/bunker/vfx_br_bunker_screen_countdown.vfx" );
}

playerpurchaselogic( var_0, var_1, var_2 )
{
    var_3 = getentarray( var_0.target, "targetname" );

    foreach ( var_5 in var_3 )
    {
        if ( var_5.script_noteworthy == "right_door_clip" )
        {
            var_0.endoperatorsfxondisconnect = var_5;
            var_0.endoperatorsfxondisconnect setnonstick( 1 );
            continue;
        }

        if ( var_5.script_noteworthy == "left_door_clip" )
        {
            var_0.endprematchskydiving = var_5;
            var_0.endprematchskydiving setnonstick( 1 );
        }
    }

    var_0.animname = "bunker_door";
    var_0 scripts\common\anim::setanimtree();

    if ( !istrue( var_2 ) )
        level thread playerpurchasenags( var_0, var_1 );

    var_7 = anglestoforward( var_0.angles );
    var_8 = var_0.origin + ( 0, 0, -110 ) + var_7 * -128;
    var_9 = getent( "clip256x256x256", "targetname" );
    var_10 = spawn( "script_model", var_8 );
    var_10.angles = var_0.angles;
    var_10 clonebrushmodeltoscriptmodel( var_9 );
    var_0.ammo_restock = var_10;
}

playerpurchasenags( var_0, var_1 )
{
    wait 10;
    var_2 = anglestoforward( var_0.angles );
    var_3 = var_0.origin + ( 0, 0, 109 ) + var_2 * 12.5;
    var_0.runbrgametypefunc = easepower( "bunker_active_indicator_light", var_3 );

    if ( istrue( var_1 ) )
        var_0.runbrgametypefunc setscriptablepartstate( "bunker_active_indicator_light", "active" );
}

syringe_finish_crouch( var_0, var_1, var_2, var_3 )
{
    var_4 = scripts\engine\utility::ter_op( isdefined( var_3 ), var_3, "door_open" );
    var_0 thread scripts\common\anim::anim_single_solo( var_0, var_4 );

    if ( soundexists( "br_bunker_door_open_01" ) )
        var_0 playsound( "br_bunker_door_open_01" );

    var_5 = getanimlength( level.scr_anim["bunker_door"][var_4] );
    var_6 = spawn( "script_model", var_0.origin );
    var_6 setmodel( "x1_bunker_door_01_anim_open" );
    var_6.angles = var_0.angles;
    var_6.origin = var_6.origin - ( 0, 0, 200 );
    waitframe();

    if ( isdefined( var_0.ammo_restock ) )
        var_0.ammo_restock delete();

    wait 8;
    var_7 = anglestoforward( var_0.angles );
    var_0.endoperatorsfxondisconnect.origin = var_0.endoperatorsfxondisconnect.origin + var_7 * -3.0;
    var_0.endprematchskydiving.origin = var_0.endprematchskydiving.origin + var_7 * -3.0;
    var_0.endoperatorsfxondisconnect rotateto( var_0.endoperatorsfxondisconnect.angles - ( 0, 90, 0 ), 5, 0.2, 0.8 );
    var_0.endprematchskydiving rotateto( var_0.endprematchskydiving.angles + ( 0, 90, 0 ), 5, 0.2, 0.8 );

    if ( soundexists( "br_bunker_door_open_02" ) )
        var_0 playsound( "br_bunker_door_open_02" );

    wait( var_5 - 8.1 );
    var_6.origin = var_6.origin + ( 0, 0, 200 );
    wait 0.1;
    var_0 hide();
    var_0.endoperatorsfxondisconnect delete();
    var_0.endprematchskydiving delete();
}

_id_1228F( var_0, var_1 )
{
    if ( !isdefined( level.br_pickups ) )
        return;

    var_2 = mainhouse_intel_sequence( var_0, var_1 );
    var_3 = scripts\engine\utility::getstructarray( var_2.target, "targetname" );
    var_4 = [];
    var_5 = [];
    var_6 = [];
    var_7 = [];
    var_8 = getdvarint( "scr_br_bunkerCache_Lege_Min", 0 );
    var_9 = getdvarint( "scr_br_bunkerCache_Lege_Max", 1 );
    var_10 = getdvarint( "scr_br_bunkerCache_Basic_Min", 1 );
    var_11 = getdvarint( "scr_br_bunkerCache_Basic_Max", 2 );

    foreach ( var_13 in var_3 )
    {
        if ( var_13.script_noteworthy == "br_loot_cache_lege" )
        {
            var_4[var_4.size] = var_13;
            continue;
        }

        if ( var_13.script_noteworthy == "br_loot_cache" )
        {
            var_5[var_5.size] = var_13;
            continue;
        }

        if ( issubstr( var_13.script_noteworthy, "uniqueLootItem" ) )
        {
            var_6[var_6.size] = var_13;
            continue;
        }

        var_7[var_7.size] = var_13;
    }

    var_15 = randomintrange( var_8, var_9 );
    var_4 = scripts\engine\utility::array_randomize( var_4 );
    var_5 = scripts\engine\utility::array_randomize( var_5 );

    for ( var_16 = 0; var_16 < var_15; var_16++ )
    {
        if ( isdefined( var_4[var_16] ) )
        {
            var_17 = easepower( var_4[var_16].script_noteworthy, var_4[var_16].origin, var_4[var_16].angles );
            scripts\mp\gametypes\br_pickups.gsc::_id_11959( var_17 );
        }
    }

    var_15 = randomintrange( var_10, var_11 );

    for ( var_16 = 0; var_16 < var_15; var_16++ )
    {
        if ( isdefined( var_5[var_16] ) )
        {
            var_17 = easepower( var_5[var_16].script_noteworthy, var_5[var_16].origin, var_5[var_16].angles );
            scripts\mp\gametypes\br_pickups.gsc::_id_11959( var_17 );
        }
    }

    foreach ( var_24, var_13 in var_6 )
    {
        if ( isdefined( var_13.script_noteworthy ) )
        {
            var_19 = _id_12A43( var_13.script_noteworthy );
            var_20 = maphint_cheesescriptableused( var_19 );
            var_21 = var_13.origin;
            var_22 = var_13.angles;

            if ( var_13.script_noteworthy == "uniqueLootItem_1" )
            {
                if ( level.mapname == "mp_bm_bunker01" )
                {
                    switch ( var_24 )
                    {
                        case 0:
                            continue;
                        case 1:
                            var_21 = ( 1969, 639, 68 );
                            var_22 = ( 0, 106.6, 75 );
                            break;
                        case 2:
                            var_21 = ( 1962, 665, 68 );
                            var_22 = ( 0, 106.6, 75 );
                            break;
                    }
                }
                else if ( scripts\cp_mp\utility\game_utility::prophidetime() )
                {
                    switch ( var_24 )
                    {
                        case 0:
                            continue;
                        case 1:
                            var_21 = ( -3858, 62596, 573 );
                            var_22 = ( 0, 106.6, 75 );
                            break;
                        case 2:
                            var_21 = ( -3850, 62571, 573 );
                            var_22 = ( 0, 106.6, 75 );
                            break;
                    }
                }
            }

            var_23 = scripts\mp\gametypes\br_pickups.gsc::maphint_computerscriptableused( var_21, var_22 );
            var_17 = scripts\mp\gametypes\br_pickups.gsc::spawnpickup( var_19, var_23, var_20, 0 );

            if ( isdefined( var_17 ) )
                var_17._id_12A42 = var_13.script_noteworthy;
        }
    }

    foreach ( var_13 in var_7 )
    {
        if ( isdefined( var_13.script_noteworthy ) )
        {
            var_26 = var_13.script_noteworthy;

            if ( var_13.script_noteworthy == "jugg_minigun" )
            {
                if ( getdvarint( "scr_br_spawnBunkerMiniGun", 1 ) == 0 )
                    continue;

                var_26 = "brloot_weapon_lm_dblmg_lege";
            }
            else if ( var_13.script_noteworthy == "jugg_minigun_chance" )
            {
                var_27 = randomintrange( 1, 100 );

                if ( var_27 > getdvarint( "scr_br_chanceForBunkerSpecialLoot", 60 ) )
                    continue;
                else
                    var_26 = modifyscenenode();
            }

            var_20 = maphint_cheesescriptableused( var_26 );
            var_23 = scripts\mp\gametypes\br_pickups.gsc::maphint_computerscriptableused( var_13.origin, var_13.angles );
            var_17 = scripts\mp\gametypes\br_pickups.gsc::spawnpickup( var_26, var_23, var_20, 0 );
        }
    }
}

maphint_cheesescriptableused( var_0 )
{
    if ( isdefined( level.br_lootiteminfo[var_0] ) )
        return level.br_lootiteminfo[var_0].jugg_getminigunweapon.clipsize;
    else if ( isdefined( level.br_ammo_clipsize[var_0] ) )
        return level.br_ammo_clipsize[var_0];
    else
        return 1;
}

_id_12A43( var_0 )
{
    switch ( var_0 )
    {
        case "uniqueLootItem_1":
            return "brloot_weapon_bp_reward_sm_mpapa7_lege";
        case "uniqueLootItem_2":
            return "brloot_weapon_bp_reward_sm_mpapa7_lege";
        default:
            return "brloot_weapon_bp_reward_sm_mpapa7_lege";
    }
}

modifyscenenode()
{
    var_0 = 0;
    var_1 = 0;
    var_2 = scripts\mp\utility\game::missions_clearinappropriaterewards();

    if ( level.gametype == "br" && ( var_2 == "br" || var_2 == "jugg" || var_2 == "mini" ) )
    {
        var_0 = 2;
        var_1 = 2;
    }

    var_3 = getdvarint( "scr_br_lootbunkerChance_AUAV", 0 );
    var_4 = getdvarint( "scr_br_lootBunkerChance_Specialist", 0 );
    var_5 = getdvarint( "scr_br_lootBunkerChance_LoadoutDrop", 0 );
    var_6 = getdvarint( "scr_br_lootBunkerChance_Gasmask", 0 );
    var_7 = getdvarint( "scr_br_lootBunkerChance_MiniGun", 0 );
    var_8 = getdvarint( "scr_br_lootBunkerChance_JuggDrop", 0 );
    var_9 = getdvarint( "scr_br_lootBunkerChance_AssaultDrone", 0 );
    var_10 = getdvarint( "scr_br_lootBunkerChance_CirclePeek", 0 );
    var_11 = 1 + var_3 + var_4 + var_5 + var_6 + var_7 + var_8 + var_9 + var_10;
    var_12 = randomintrange( 1, var_11 );

    if ( var_12 <= var_3 )
        return "brloot_killstreak_auav";
    else if ( var_12 <= var_3 + var_4 )
        return "brloot_specialist_bonus";
    else if ( var_12 <= var_3 + var_4 + var_5 )
        return "brloot_offhand_advancedsupplydrop";
    else if ( var_12 <= var_3 + var_4 + var_5 + var_6 )
        return "brloot_equip_gasmask_durable";
    else if ( var_12 <= var_3 + var_4 + var_5 + var_6 + var_7 )
        return "brloot_weapon_lm_dblmg_lege";
    else if ( var_12 <= var_3 + var_4 + var_5 + var_6 + var_7 + var_8 )
        return "brloot_killstreak_juggernaut";
    else if ( var_12 <= var_3 + var_4 + var_5 + var_6 + var_7 + var_8 + var_9 )
        return "brloot_killstreak_assaultdrone";
    else
        return "brloot_killstreak_circle_peek";
}

mainhouse_intel_sequence( var_0, var_1 )
{
    var_2 = scripts\engine\utility::getstructarray( var_1, "targetname" );

    if ( isdefined( var_2 ) )
    {
        if ( var_2.size == 1 )
            return var_2[0];
        else
        {
            var_3 = undefined;
            var_4 = undefined;

            for ( var_5 = 0; var_5 < var_2.size; var_5++ )
            {
                var_6 = distance2dsquared( var_0, var_2[var_5].origin );

                if ( !isdefined( var_4 ) || var_6 < var_4 )
                {
                    var_4 = var_6;
                    var_3 = var_2[var_5];
                }
            }

            return var_3;
        }
    }

    return undefined;
}

announceplayercountlandmarks( var_0 )
{
    if ( propaddtolocation( var_0.angles[1], 106, 1 ) )
    {
        var_1 = anglestoforward( var_0.angles );
        return [ var_0.origin + var_1 * 30, ( var_0.angles[0], 106, 90 ) ];
    }
    else if ( propaddtolocation( var_0.angles[1], 90, 1 ) )
    {
        var_1 = anglestoforward( var_0.angles );
        return [ var_0.origin - var_1 * 10, var_0.angles ];
    }
    else if ( propaddtolocation( var_0.angles[1], 70, 1 ) )
        return [ var_0.origin, ( var_0.angles[0], var_0.angles[1], 0 ) ];

    return [ var_0.origin, var_0.angles ];
}

propaddtolocation( var_0, var_1, var_2 )
{
    return abs( var_0 - var_1 ) <= var_2;
}

give_killstreak_airstrike()
{
    disablecachesaroundorigin( ( -17923, -42192, -252 ) );
    disablecachesaroundorigin( ( -15045, 45467, -186 ) );
    disablecachesaroundorigin( ( 1992, 38955, 1378 ) );
    disablecachesaroundorigin( ( 49764, 34322, 206 ) );
    disablecachesaroundorigin( ( 52510, -32696, -119 ) );
    disablecachesaroundorigin( ( 47158, -10562, 131 ) );
    disablecachesaroundorigin( ( -39282, -2005, -78 ) );
    disablecachesaroundorigin( ( 41919, -41349, -580 ) );
    disablecachesaroundorigin( ( -38426, -19360, 403 ) );
    disablecachesaroundorigin( ( 21085, 16700, 246 ) );
    disablecachesaroundorigin( ( 17893, -34039, -561 ) );
}

getvehiclespawns()
{
    disablecachesaroundorigin( ( -4337, 62466, 580 ) );
}

disablecachesaroundorigin( var_0, var_1 )
{
    var_2 = 2000;

    if ( !isdefined( var_1 ) )
        var_1 = var_2;

    var_3 = getlootspawnpoint( var_0, var_1, 0, 0 );

    foreach ( var_5 in var_3 )
    {
        if ( propaddtolocation( var_0[2], var_5.origin[2], 100 ) )
            getlootspawnpointcount( var_5.index );
    }
}

playerpulloutofgulagwin()
{
    level.current_tablet = [];
    var_0 = scripts\engine\utility::getstructarray( "bunker_back_keypad", "targetname" );

    foreach ( var_2 in var_0 )
    {
        var_3 = easepower( "maphint_keypad_bunker_interior", var_2.origin );
        var_3.brjugg_onplayerkilled = 1;

        if ( isdefined( var_2.script_noteworthy ) )
        {
            var_3.current_volume_allies = int( var_2.script_noteworthy );
            level.current_tablet[var_3.current_volume_allies] = var_3;
        }
    }
}

relic_amped_show_timer( var_0, var_1, var_2, var_3, var_4 )
{
    level thread add_to_emp_drone_target_list( var_0, var_1, var_2, var_3, var_4 );
}

add_to_emp_drone_target_list( var_0, var_1, var_2, var_3, var_4 )
{
    var_0 setscriptablepartstate( var_1, "off" );

    if ( isdefined( var_0.get_veh_spawn_test_spawners ) )
        level thread relic_amped_last_kill_time( var_0, var_1 );

    var_3 relic_amped_pick_random_valid_player( var_0 );

    if ( isdefined( var_3 ) )
        var_3 scripts\mp\gametypes\br_keypad_util.gsc::usescriptablemeleeblood( 0 );

    wait 1;

    if ( !isdefined( var_0.get_veh_spawn_test_spawners ) )
        var_0 setscriptablepartstate( var_1, "on" );
}

relic_amped_pick_random_valid_player( var_0 )
{
    level endon( "game_ended" );
    self endon( "keypad_kickPlayerFromKeypadMSG" );
    thread relic_amped_is_there_valid_new_victim( var_0 );
    thread relic_amped_paused( var_0 );
    thread relic_amped_pick_new_victim( var_0 );
    scripts\mp\gametypes\br_keypad_util.gsc::usescriptablemeleeblood( 1 );
    var_1 = 8;

    if ( isdefined( var_0.enter_laser_panel_anim_sequence ) )
        var_1 = var_0.enter_laser_panel_anim_sequence;

    scripts\mp\gametypes\br_keypad_util.gsc::usequesttimer( var_1 );
    scripts\mp\gametypes\br_keypad_util.gsc::usereload( [ 0 ] );

    if ( istrue( var_0.entercodenumber ) && var_0.enter_laser_panel_anim_sequence <= 5 )
        scripts\mp\gametypes\br_keypad_util.gsc::usereload( var_0.engagementtime["array"] );

    while ( isdefined( self ) && scripts\mp\gametypes\br_keypad_util.gsc::mark_danger() != 0 )
    {
        self waittill( "luinotifyserver", var_2, var_3 );

        if ( isdefined( var_2 ) )
        {
            if ( var_2 == "submit_br_keypad" )
            {
                if ( getdvarint( "scr_br_bunker_keypad_refresh_idle_timer_on_try", 0 ) )
                    thread relic_amped_pick_new_victim( var_0 );

                if ( isdefined( var_0.engagementtime ) && propane_detonate_fiery_drips( var_0, var_3 ) )
                {
                    scripts\mp\gametypes\br_keypad_util.gsc::usescriptablemeleeblood( 2 );
                    var_0.entisalivevehicle = 2;

                    if ( isdefined( var_0._id_12571 ) )
                        [[ var_0._id_12571 ]]( var_0 );

                    break;
                }
                else
                {
                    if ( soundexists( "br_keypad_deny" ) )
                        playsoundatpos( self.origin, "br_keypad_deny" );

                    var_0.entisalivevehicle = 3;
                    scripts\mp\gametypes\br_keypad_util.gsc::usescriptablemeleeblood( 3 );
                    waitframe();

                    if ( isdefined( self ) )
                        scripts\mp\gametypes\br_keypad_util.gsc::usescriptablemeleeblood( 1 );
                }

                continue;
            }

            if ( var_2 == "exit_br_keypad" )
            {
                var_0.entisalivevehicle = 3;

                if ( isdefined( var_0.get_veh_spawn_test_spawners ) )
                    level notify( var_0.get_veh_spawn_test_spawners );

                break;
            }
        }
    }

    scripts\mp\gametypes\br_keypad_util.gsc::usereload( [ 0 ] );
    self notify( "doneWithKeypad" );
}

relic_amped_is_there_valid_new_victim( var_0 )
{
    self endon( "keypad_kickPlayerFromKeypadMSG" );
    level endon( "game_ended" );
    self waittill( "death_or_disconnect" );

    if ( isdefined( var_0.get_veh_spawn_test_spawners ) )
        level notify( var_0.get_veh_spawn_test_spawners );

    scripts\mp\gametypes\br_keypad_util.gsc::usereload( [ 0 ] );
    self notify( "keypad_kickPlayerFromKeypadMSG" );
}

relic_amped_paused( var_0 )
{
    self endon( "keypad_kickPlayerFromKeypadMSG" );
    level endon( "game_ended" );
    self waittill( "last_stand_start" );

    if ( isdefined( var_0.get_veh_spawn_test_spawners ) )
        level notify( var_0.get_veh_spawn_test_spawners );

    scripts\mp\gametypes\br_keypad_util.gsc::usereload( [ 0 ] );
    self notify( "keypad_kickPlayerFromKeypadMSG" );
}

relic_amped_pick_new_victim( var_0 )
{
    self endon( "keypad_kickPlayerFromKeypadMSG" );
    self notify( "keypad_playerIdleWatch" );
    self endon( "keypad_playerIdleWatch" );
    wait( getdvarint( "scr_br_bunker_keypad_idle_timer", 60 ) );

    if ( isdefined( var_0.get_veh_spawn_test_spawners ) )
        level notify( var_0.get_veh_spawn_test_spawners );

    scripts\mp\gametypes\br_keypad_util.gsc::usereload( [ 0 ] );
    self notify( "keypad_kickPlayerFromKeypadMSG" );
}

relic_amped_last_kill_time( var_0, var_1 )
{
    if ( isdefined( var_0.get_veh_spawn_test_spawners ) )
        level waittill( var_0.get_veh_spawn_test_spawners );

    var_0 setscriptablepartstate( var_1, "on" );
}

propane_detonate_fiery_drips( var_0, var_1 )
{
    if ( !isdefined( var_0.engagementtime["string"] ) )
        return;

    if ( var_1 == -1 )
        return 0;

    var_2 = int( var_0.engagementtime["string"] );

    if ( var_1 == var_2 )
        return 1;

    return 0;
}

laser_func( var_0, var_1 )
{
    var_2 = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ];

    for ( var_3 = 0; var_3 < var_0; var_3++ )
    {
        var_2 = scripts\engine\utility::array_randomize( var_2 );
        var_1.engagementtime[var_3] = var_2[0];
        var_2 = scripts\engine\utility::array_remove( var_2, var_2[0] );
    }
}

laser_end_pos( var_0, var_1, var_2, var_3 )
{
    var_4 = [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ];
    var_1.engagementtime = [];

    if ( !isdefined( var_2 ) )
        var_2 = 0;
    else
        var_1.engagementtime["doubles"] = [];

    if ( !isdefined( var_3 ) )
        var_3 = 0;
    else
        var_1.engagementtime["triples"] = [];

    var_5 = var_0 - var_2 - var_3 * 2;
    var_6 = scripts\engine\utility::array_randomize( var_4 );
    var_4 = [];
    var_7 = randomintrange( 1, 9 );

    foreach ( var_10, var_9 in var_6 )
    {
        if ( var_10 == var_7 )
        {
            var_4[var_4.size] = 0;
            continue;
        }

        var_4[var_4.size] = var_9;
    }

    for ( var_11 = 0; var_11 < var_5; var_11++ )
        var_1.engagementtime["array"][var_11] = var_4[var_11];

    var_12 = var_1.engagementtime["array"];

    for ( var_11 = 0; var_11 < var_2; var_11++ )
    {
        var_13 = var_12[var_11];
        var_1.engagementtime["array"][var_1.engagementtime["array"].size] = var_13;
        var_1.engagementtime["doubles"][var_1.engagementtime["doubles"].size] = var_13;
        var_12 = scripts\engine\utility::array_remove( var_12, var_12[var_11] );
    }

    for ( var_11 = 0; var_11 < var_3; var_11++ )
    {
        var_14 = var_12[var_11];

        for ( var_15 = 0; var_15 < 2; var_15++ )
            var_1.engagementtime["array"][var_1.engagementtime["array"].size] = var_14;

        var_1.engagementtime["triples"][var_1.engagementtime["triples"].size] = var_14;
        var_12 = scripts\engine\utility::array_remove( var_12, var_12[var_11] );
    }

    var_1.engagementtime["array"] = scripts\engine\utility::array_randomize( var_1.engagementtime["array"] );
    var_1.engagementtime["string"] = "";

    foreach ( var_9 in var_1.engagementtime["array"] )
    {
        var_17 = "" + var_9;
        var_1.engagementtime["string"] = var_1.engagementtime["string"] + var_17;
    }
}

laser_control_station_use_monitor( var_0, var_1, var_2, var_3 )
{
    if ( var_2 > var_0["doubles"].size )
        var_2 = 0;

    if ( var_3 > var_0["triples"].size )
        var_3 = 0;

    var_4 = 0;
    var_5 = 0;
    var_6 = scripts\engine\utility::array_randomize( scripts\engine\utility::array_remove_duplicates( var_0["array"] ) );
    var_7 = [];

    for ( var_8 = 0; var_8 < var_1; var_8++ )
    {
        if ( var_4 < var_2 )
        {
            var_9 = var_0["doubles"][var_4];
            var_4++;
        }
        else if ( var_5 < var_3 )
        {
            var_9 = var_0["triples"][var_5];
            var_5++;
        }
        else
            var_9 = var_6[0];

        var_7[var_9] = var_8 + 1;
        var_6 = scripts\engine\utility::array_remove( var_6, var_9 );
    }

    var_10 = [];
    var_11 = getarraykeys( var_7 );

    foreach ( var_19, var_13 in var_11 )
    {
        var_10[var_19] = var_0["array"];
        var_14 = 0;

        foreach ( var_18, var_16 in var_10[var_19] )
        {
            if ( var_16 == var_13 && var_14 )
            {
                var_10[var_19][var_18] = "symbol" + var_7[var_13];
                var_17 = 1;
                continue;
            }

            if ( var_16 == var_13 && !var_14 )
            {
                var_14 = 1;
                continue;
            }

            if ( scripts\engine\utility::array_contains( var_11, var_16 ) )
                var_10[var_19][var_18] = "symbol" + var_7[var_16];
        }
    }

    return var_10;
}

bounceshot( var_0, var_1 )
{
    var_0 = scripts\engine\utility::array_randomize( var_0 );

    foreach ( var_4, var_3 in var_0 )
    {
        if ( var_4 > var_1.size )
            var_4 = 0;

        var_3.scriptable.glgrenadeparent = var_4;
    }
}

make_all_doors_solid( var_0, var_1 )
{
    return var_0.glint[var_1];
}

scriptable_door_freeze_open( var_0 )
{
    if ( isdefined( var_0.doors ) )
    {
        foreach ( var_2 in var_0.doors )
            var_2 scriptabledoorfreeze( 1 );
    }
}

_id_12A55( var_0 )
{
    if ( isdefined( var_0.doors ) )
    {
        foreach ( var_2 in var_0.doors )
            var_2 scriptabledoorfreeze( 0 );
    }
}

table_parseweaponvariantidvalue( var_0, var_1 )
{
    foreach ( var_3 in var_0.doors )
        var_3 scriptabledooropen( "away", var_0.origin );

    if ( istrue( var_1 ) )
    {
        wait 1;
        scriptable_door_freeze_open( var_0 );
    }
}

enemy_traversal_management( var_0, var_1 )
{
    foreach ( var_3 in var_0.doors )
        var_3 scriptabledoorclose( 1 );

    if ( istrue( var_1 ) )
    {
        var_5 = 0;

        while ( !var_5 )
        {
            var_6 = 0;

            foreach ( var_3 in var_0.doors )
            {
                if ( !var_3 scriptabledoorisclosed() )
                    var_6 = 1;
            }

            if ( !var_6 )
                var_5 = 1;

            waitframe();
        }

        scriptable_door_freeze_open( var_0 );
    }
}

playerzombiehud()
{
    level.hangar_juggs = getdvarint( "NROSLKMMQQ", 0 ) > 0;
    scripts\mp\gamelogic::_id_11A53( 9 );
    level.handletrex = getent( "clip128x128x8", "targetname" );
}

_id_11CEE( var_0 )
{
    foreach ( var_2 in var_0 )
        var_2 thread _id_11CED();

    var_4 = 0;

    for (;;)
    {
        var_4 = 1;

        foreach ( var_2 in var_0 )
        {
            if ( var_2 _id_11CF3() )
            {
                var_4 = 0;
                break;
            }
        }

        if ( var_4 )
            break;

        waitframe();
    }

    return 1;
}

_id_11CEF( var_0 )
{
    foreach ( var_2 in var_0 )
        var_2 _id_11CF0();
}

_id_11CED()
{
    self endon( "door_cl_end" );

    if ( istrue( self.handleteamvisibility ) )
        return;

    self.handleteamvisibility = 1;
    var_0 = combineangles( self.angles, ( 0, -1 * self scriptabledoorangle(), 0 ) );
    var_1 = self.origin;
    var_2 = anglestoforward( var_0 );
    var_3 = anglestoup( self.angles );
    var_4 = 28.0;
    var_5 = 48.0;
    var_1 = var_1 + var_2 * var_4;
    var_1 = var_1 + var_3 * var_5;
    var_6 = sqrt( pow( 28.0, 2 ) + pow( 48.0, 2 ) ) + 20;
    var_7 = var_1 + var_3 * 128 * -0.5;
    var_8 = combineangles( var_0, ( 0, -90, 0 ) );

    if ( 1 && isdefined( level.handletrex ) )
    {
        var_9 = spawn( "script_model", ( 0, 0, 0 ) );
        var_9 clonebrushmodeltoscriptmodel( level.handletrex );
        var_9.origin = var_7;
        var_9.angles = var_8;
        self.handleweaponreloadammodrop = var_9;
    }

    self.hangar_doors_opening_quadrace = [];

    while ( !self scriptabledoorisclosed() )
    {
        self scriptabledoorclose();

        if ( 1 )
        {
            var_10 = scripts\mp\utility\player::getplayersinradius( var_1, var_6 );

            foreach ( var_12 in var_10 )
            {
                var_13 = var_12 getentitynumber();

                if ( !var_12 scripts\cp_mp\utility\player_utility::_isalive() )
                {
                    self.hangar_doors_opening_quadrace[var_13] = undefined;
                    continue;
                }

                if ( !isdefined( self.hangar_doors_opening_quadrace[var_13] ) )
                {
                    var_12 _id_11CF1( 1 );
                    self.hangar_doors_opening_quadrace[var_13] = var_12;
                }
            }

            foreach ( var_13, var_12 in self.hangar_doors_opening_quadrace )
            {
                if ( !isdefined( var_12 ) || !var_12 scripts\cp_mp\utility\player_utility::_isalive() )
                {
                    self.hangar_doors_opening_quadrace[var_13] = undefined;
                    continue;
                }

                var_16 = 1;

                foreach ( var_18 in var_10 )
                {
                    if ( var_18 == var_12 )
                    {
                        var_16 = 0;
                        break;
                    }
                }

                if ( var_16 )
                {
                    var_12 _id_11CF1( 0 );
                    self.hangar_doors_opening_quadrace[var_13] = undefined;
                }
            }
        }

        waitframe();
    }

    self scriptabledoorfreeze();
    thread _id_11CF0();
}

_id_11CF0()
{
    self notify( "door_cl_end" );
    self.handleteamvisibility = undefined;

    if ( isdefined( self.handleweaponreloadammodrop ) )
    {
        self.handleweaponreloadammodrop delete();
        self.handleweaponreloadammodrop = undefined;
    }

    if ( isdefined( self.hangar_doors_opening_quadrace ) )
    {
        foreach ( var_1 in self.hangar_doors_opening_quadrace )
        {
            if ( !isdefined( var_1 ) || !var_1 scripts\cp_mp\utility\player_utility::_isalive() )
                continue;

            var_1 _id_11CF1( 0 );
        }
    }

    self.hangar_doors_opening_quadrace = undefined;
}

_id_11CF1( var_0 )
{
    scripts\common\utility::allow_melee( !var_0, "door_cl" );
    scripts\common\utility::allow_usability( !var_0, "door_cl" );
}

_id_11CF3()
{
    return istrue( self.handleteamvisibility );
}

_id_11CF2()
{
    return istrue( level.hangar_juggs );
}

explosive_cars( var_0 )
{
    playsoundatpos( var_0.origin, "br_computer_deny" );
    var_0 setscriptablepartstate( var_0.type, "off" );
    wait 3;
    var_0 setscriptablepartstate( var_0.type, "on" );
}
