// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_initignoredtabspergamemode()
{

}

_loadout_setcopyloadoutomvnaronspawn()
{

}

init()
{
    player_weapon_fired_monitor();
}

player_weapon_fired_monitor()
{
    playerplunderlose();
    init_locations();
    scripts\mp\gametypes\br_gametypes.gsc::give_fists( "gulag" );
    scripts\mp\gametypes\br_gametypes.gsc::give_fists( "oneLife" );
    scripts\mp\gametypes\br_gametypes.gsc::give_fists( "playerCountLandmarks" );
    scripts\mp\gametypes\br_gametypes.gsc::give_fists( "movingCircle" );
    scripts\mp\gametypes\br_gametypes.gsc::give_fists( "randomizeCircleCenter" );
    scripts\mp\gametypes\br_gametypes.gsc::give_fists( "planeSnapToOOB" );
    scripts\mp\gametypes\br_gametypes.gsc::give_fists( "drogBagLoadout" );
    scripts\mp\gametypes\br_gametypes.gsc::hostdamagepercentmedium( "planeUseCircleRadius" );
    scripts\mp\gametypes\br_gametypes.gsc::hostdamagepercentmedium( "tabletReplace" );
    scripts\mp\gametypes\br_gametypes.gsc::hostdamagepercentmedium( "circleEarlyStart" );
    level.checkpoint_carepkg_spawns_func = ::dropjuggernautcrate;
    scripts\mp\gametypes\br_gametypes.gsc::zombienumhitshuman( "getFinalCircleCenter", ::make_use_prompt );
    scripts\mp\gametypes\br_gametypes.gsc::zombienumhitshuman( "mapCenterFinalCircle", ::make_use_prompt );
    scripts\mp\gametypes\br_gametypes.gsc::zombienumhitshuman( "addToC130Infil", ::anim_offset );
    scripts\mp\gametypes\br_gametypes.gsc::zombienumhitshuman( "createC130PathStruct", ::flickerlights );
    scripts\mp\gametypes\br_gametypes.gsc::zombienumhitshuman( "playerShouldRespawn", ::usingtacmap );
    scripts\mp\gametypes\br_gametypes.gsc::zombienumhitshuman( "spawnHandled", ::_id_122C5 );
    scripts\mp\gametypes\br_gametypes.gsc::zombienumhitshuman( "playerKilledSpawn", ::update_volume_flag );
    scripts\mp\gametypes\br_gametypes.gsc::zombienumhitshuman( "onPlayerKilled", ::onplayerkilled );
    scripts\mp\gametypes\br_gametypes.gsc::zombienumhitshuman( "infilSequence", ::half_size );
    scripts\mp\gametypes\br_gametypes.gsc::zombienumhitshuman( "skipInfilSequence", ::_id_120B2 );
    scripts\mp\gametypes\br_gametypes.gsc::zombienumhitshuman( "onPlayerConnect", ::onplayerconnect );
    _debug_rooftopobjstart::init();
    level thread player_waittilljumpedfromc130();
}

playerplunderlose()
{
    level.convoy_handle_stuck_compromise = spawnstruct();
    level.convoy_handle_stuck_compromise.get_players_in_mortar_range = getdvarint( "scr_brRumble_tacmap_zoom", 12000 );
    level.convoy_handle_stuck_compromise._id_1251F = getdvar( "scr_brRumble_location_override", "random" );
    level.convoy_handle_stuck_compromise.place_weapons_at_pos = getdvarint( "scr_brRumble_points_per_kill", 1 );
    level.convoy_handle_stuck_compromise.place_bad_place_until_flag = getdvarint( "scr_brRumble_killmonger_kill_bonus", 1 );
    level.convoy_handle_stuck_compromise.pkg_lbl_vo = getdvarint( "scr_brRumble_killing_killmonger_bonus", 1 );
    level._id_12B6A = getdvarint( "scr_brRumble_useAutoRespawn", 1 );
    level.brenableagents = getdvarfloat( "scr_brRumble_defaultRespawnTime", 15 );
    level._id_1276F = getdvarint( "scr_brRumble_tokenRespawnWaitTime", level.brenableagents );
    level.play_player_approach = getdvarint( "scr_brRumble_respawn_penalty", 0 );
    level.play_player_disguise_vo = getdvarfloat( "scr_brRumble_respawn_penalty_max", 15 );
    level._id_11AA6 = getdvarint( "scr_brRumble_respawnHeightOverride", 5000 );
    level._id_11AB2 = getdvarint( "scr_brRumble_respawn_time_disable", 0 );
    level.targs_done = getdvarfloat( "scr_brRumble_parachuteDeployDelay", 0.5 );
    setdvar( "scr_br_ending_enabled", 0 );
}

player_waittilljumpedfromc130()
{
    waitframe();
    level.ontimelimit = ::stim_crate_use_alt;
    scripts\mp\gametypes\br_gametypes.gsc::give_fists( "waitLoadoutDone" );
    scripts\mp\flags::gameflaginit( "infil_complete", 0 );
    scripts\mp\gametypes\br_gametype_truckwar.gsc::played_fulton_crate_anim();
    scripts\mp\gametypes\br_gametype_truckwar.gsc::playimpactfx();
    level thread player_waitforlanded();
}

player_waitforlanded()
{
    scripts\mp\flags::gameflagwait( "prematch_fade_done" );
    level thread _id_1299D();
    scripts\mp\flags::gameflagwait( "infil_complete" );
}

_hidesafecircleui()
{

}

dropjuggernautcrate()
{
    level.br_level._id_124B3 = 1;
    var_0 = _id_11B6A();
    level.convoy_handle_stuck_compromise._id_11C07 = little_bird_mg_givetakegunnerturrettimeout( var_0 );
    level notify( "rumble_location_selected" );
    level.dropoff = level.convoy_handle_stuck_compromise._id_11C07.dropcpcratefromscriptedheli;
    var_1 = getdvarint( "scr_br_timelimit" );
    level.br_level.br_circledelaytimes = [ var_1 ];
    level.br_level.br_circleclosetimes = [ var_1 ];
    level.br_level.br_circleradii = [ level.convoy_handle_stuck_compromise._id_11C07.circle_radius, level.convoy_handle_stuck_compromise._id_11C07.circle_radius ];
    level.br_level.br_circleminimapradii = [ level.convoy_handle_stuck_compromise._id_11C07.circle_radius ];
    level.br_level.checkpoint_edit_loadout = [ 0 ];
    level.br_level.checkpoint_edit_munitions = [ 0 ];
    playerinlaststandhold();
}

make_use_prompt()
{
    return level.convoy_handle_stuck_compromise._id_11C07.dropcpcratefromscriptedheli;
}

flickerlights()
{
    var_0 = ( level.br_level.checkpoint_create_carepackage[0][0], level.br_level.checkpoint_create_carepackage[0][1], 0 );
    var_1 = level.br_level.br_circleradii[0] * 0.66;
    var_2 = scripts\mp\gametypes\br_c130.gsc::createtestc130path( var_0, var_1 );
    return var_2;
}

anim_offset()
{
    thread relic_bang_and_boom_dropfunc();
}

relic_bang_and_boom_dropfunc()
{
    level endon( "game_ended" );
    self endon( "death" );
    var_0 = distance( self.teleport_text_updated.startpt, self.teleport_text_updated.hvt_delayed_cig );
    var_1 = var_0 / scripts\mp\gametypes\br_c130.gsc::getc130speed() - 5;
    wait( var_1 );

    foreach ( var_3 in level.players )
    {
        if ( isdefined( var_3 ) && isdefined( var_3.br_infil_type ) && var_3.br_infil_type == "c130" && !isdefined( var_3.jumptype ) )
        {
            var_3.jumptype = "outOfBounds";
            var_3 notify( "halo_kick_c130" );
        }
    }
}

_killstreakneedslocationselection()
{

}

half_size()
{
    scripts\mp\deathicons::_id_11A16();

    for ( var_0 = 0; var_0 < level.players.size; var_0++ )
    {
        var_1 = level.players[var_0];

        if ( !isdefined( var_1 ) )
            continue;

        if ( !isalive( var_1 ) )
            var_1 scripts\mp\playerlogic::spawnplayer( 0 );

        if ( istrue( var_1.checkpointstruct ) )
            scripts\mp\gametypes\br.gsc::_id_12A58( var_1 );

        var_1 setclientomnvar( "ui_br_infil_started", 1 );
        var_1 setclientomnvar( "ui_br_infiled", 1 );
        var_1 scripts\mp\gametypes\br_gulag.gsc::gulagfadetoblack();
        var_2 = var_1 little_bird_onexitheavydamagestate();
        var_3 = var_1 scripts\mp\gametypes\br_gulag.gsc::updatex1stashhud( var_2 );
    }

    wait 2.0;

    foreach ( var_1 in level.players )
    {
        if ( !isdefined( var_1 ) )
            continue;

        var_1 thread tugofwar_hvt_placed();
    }

    scripts\mp\flags::gameflagset( "prematch_fade_done" );
    scripts\mp\flags::gameflagset( "infil_complete" );
    waitframe();
}

_id_120B2()
{
    scripts\mp\flags::gameflagset( "infil_complete" );
}

_maphint_cheese2scriptableused()
{

}

playerinlaststandhold()
{
    level.convoy_handle_stuck_compromise._id_11C07._id_122C6["allies"] = level.convoy_handle_stuck_compromise._id_11C07._id_121EF;
    level.convoy_handle_stuck_compromise._id_11C07._id_122C6["axis"] = level.convoy_handle_stuck_compromise._id_11C07._id_121F0;
    level.convoy_handle_stuck_compromise._id_11C07._id_12304["allies"] = anglestoforward( ( 0, level.convoy_handle_stuck_compromise._id_11C07._id_12192, 0 ) );
    level.convoy_handle_stuck_compromise._id_11C07._id_12304["axis"] = anglestoforward( ( 0, level.convoy_handle_stuck_compromise._id_11C07._id_12193, 0 ) );
    level.convoy_handle_stuck_compromise._id_11C07._id_12281 = level.convoy_handle_stuck_compromise._id_11C07._id_12195;
    level.convoy_handle_stuck_compromise._id_11C07._id_12280 = level.convoy_handle_stuck_compromise._id_11C07._id_12194;
    level.convoy_handle_stuck_compromise._id_11C07._id_122A2 = level.convoy_handle_stuck_compromise._id_11C07._id_121C0;
    level.convoy_handle_stuck_compromise._id_11C07._id_122A1 = level.convoy_handle_stuck_compromise._id_11C07._id_121BF;
    level.convoy_handle_stuck_compromise._id_11C07._id_122DA = level.convoy_handle_stuck_compromise._id_11C07._id_12230;
    level.convoy_handle_stuck_compromise._id_11C07._id_122D9 = level.convoy_handle_stuck_compromise._id_11C07._id_1222F;
    var_0 = level.convoy_handle_stuck_compromise._id_11C07.dropcpcratefromscriptedheli + level.convoy_handle_stuck_compromise._id_11C07._id_12304["allies"] * level.convoy_handle_stuck_compromise._id_11C07.circle_radius * level.convoy_handle_stuck_compromise._id_11C07._id_122A2;
    var_1 = level.convoy_handle_stuck_compromise._id_11C07.dropcpcratefromscriptedheli + level.convoy_handle_stuck_compromise._id_11C07._id_12304["axis"] * level.convoy_handle_stuck_compromise._id_11C07.circle_radius * level.convoy_handle_stuck_compromise._id_11C07._id_122A2;
    level.convoy_handle_stuck_compromise._id_11C07.spawnorigin["allies"] = var_0;
    level.convoy_handle_stuck_compromise._id_11C07.spawnorigin["axis"] = var_1;
    level.convoy_handle_stuck_compromise._id_11C07.initsolospawnstruct = level.convoy_handle_stuck_compromise._id_11C07._id_121DB;
    level thread vo_five_remain();
}

vo_five_remain()
{
    level.x1ops6 = [];
    level.x1ops6["allies"] = [];
    level.x1ops6["axis"] = [];
    var_0 = getdvarint( "scr_br_teamsize", 50 );
    var_1 = getdvarint( "scr_brRumble_spawn_trace_count", 5 );

    while ( !isdefined( level.teamnamelist ) )
        waitframe();

    var_2 = 0;
    var_3 = scripts\mp\teams::_id_11FEB();

    foreach ( var_5 in level.teamnamelist )
    {
        if ( var_3 && var_5 == "team_two_hundred" )
            continue;

        for ( var_6 = 0; var_6 < var_0; var_6++ )
        {
            var_7 = spawnstruct();
            var_8 = vectortoangles( level.convoy_handle_stuck_compromise._id_11C07._id_12304[var_5] );
            var_9 = randomfloatrange( level.convoy_handle_stuck_compromise._id_11C07._id_12281, level.convoy_handle_stuck_compromise._id_11C07._id_12280 );
            var_10 = anglestoforward( ( 0, var_8[1] + scripts\engine\utility::ter_op( scripts\engine\utility::cointoss(), var_9, var_9 * -1 ), 0 ) );
            var_11 = randomfloatrange( level.convoy_handle_stuck_compromise._id_11C07._id_122A2, level.convoy_handle_stuck_compromise._id_11C07._id_122A1 );
            var_12 = level.convoy_handle_stuck_compromise._id_11C07.dropcpcratefromscriptedheli + var_10 * level.convoy_handle_stuck_compromise._id_11C07.circle_radius * var_11;

            if ( istrue( level.convoy_handle_stuck_compromise._id_11C07.initsolospawnstruct ) )
            {
                var_13 = level.convoy_handle_stuck_compromise._id_11C07.spawnorigin[scripts\mp\utility\game::getotherteam( var_5 )[0]] - var_12;
                var_8 = vectortoangles( var_13 );
            }
            else
                var_8 = vectortoangles( var_10 * -1 );

            var_14 = scripts\engine\trace::create_default_contents( 1 );
            var_15 = 0;
            var_16 = 0;
            var_17 = 10;
            var_18 = [];

            for ( var_19 = 0; var_19 < var_1; var_19++ )
            {
                var_20 = scripts\engine\trace::ray_trace( var_12 + ( 0, 0, 10000 ), var_12 - ( 0, 0, 20000 ) + anglestoforward( var_8 ) * var_19 * 2000, undefined, var_14 )["position"];
                var_18[var_18.size] = var_20;

                if ( var_20[2] > var_15 )
                {
                    var_15 = var_20[2];
                    var_16 = var_19;
                }

                var_2++;

                if ( var_2 == 5 )
                {
                    waitframe();
                    var_2 = 0;
                }
            }

            var_12 = ( var_12[0], var_12[1], var_15 + level.convoy_handle_stuck_compromise._id_11C07._id_122C6[var_5] );
            var_7.origin = var_12;
            var_7._id_127C1 = var_18;
            var_7.packedbits = var_16;
            var_7.angles = var_8;
            var_7.time = gettime();
            var_7.team = var_5;
            var_7.index = -1;
            level.x1ops6[var_5][level.x1ops6[var_5].size] = var_7;
        }
    }
}

little_bird_onexitheavydamagestate()
{
    if ( !isdefined( self.x1ops5 ) )
    {
        self.x1ops5 = spawnstruct();
        return laser_activate();
    }

    self.ti_spawn = 0;

    if ( isdefined( self.setspawnpoint ) )
    {
        var_0 = self.setspawnpoint;

        if ( !istrue( self.setspawnpoint.notti ) )
        {
            self.ti_spawn = 1;
            self playlocalsound( "tactical_spawn" );

            foreach ( var_2 in level.teamnamelist )
            {
                if ( var_2 != self.team )
                    self playsoundtoteam( "tactical_spawn", var_2 );
            }
        }

        foreach ( var_5 in level.ugvs )
        {
            if ( distancesquared( var_5.origin, self.setspawnpoint.playerspawnpos ) < 1024 )
                var_5 notify( "damage", 5000, var_5.owner, ( 0, 0, 0 ), ( 0, 0, 0 ), "MOD_EXPLOSIVE", "", "", "", undefined, getcompleteweaponname( "killstreak_jammer_mp" ) );
        }

        var_7 = vectortoangles( level.convoy_handle_stuck_compromise._id_11C07._id_12304[self.team] );
        var_8 = randomfloatrange( level.convoy_handle_stuck_compromise._id_11C07._id_12281, level.convoy_handle_stuck_compromise._id_11C07._id_12280 );
        var_9 = anglestoforward( ( 0, var_7[1] + scripts\engine\utility::ter_op( scripts\engine\utility::cointoss(), var_8, var_8 * -1 ), 0 ) );
        var_10 = randomfloatrange( level.convoy_handle_stuck_compromise._id_11C07._id_122DA, level.convoy_handle_stuck_compromise._id_11C07._id_122D9 );
        var_11 = self.setspawnpoint.playerspawnpos + var_9 * var_10;

        if ( distance2dsquared( var_11, level.convoy_handle_stuck_compromise._id_11C07.dropcpcratefromscriptedheli ) > level.convoy_handle_stuck_compromise._id_11C07.circle_radius * level.convoy_handle_stuck_compromise._id_11C07.circle_radius )
        {
            var_12 = vectornormalize( var_11 - level.convoy_handle_stuck_compromise._id_11C07.dropcpcratefromscriptedheli );
            var_11 = level.convoy_handle_stuck_compromise._id_11C07.dropcpcratefromscriptedheli + var_12 * level.convoy_handle_stuck_compromise._id_11C07.circle_radius * 0.99;
        }

        var_13 = scripts\engine\trace::create_default_contents( 1 );
        var_14 = scripts\engine\utility::drop_to_ground( var_11, 10000, -20000, undefined, var_13 );
        var_11 = ( var_11[0], var_11[1], var_14[2] );
        var_11 = var_11 + ( 0, 0, 1 ) * level.convoy_handle_stuck_compromise._id_11C07._id_122C6[self.team];
        self.x1ops5.origin = var_11;
        self.x1ops5.angles = self.setspawnpoint.playerspawnangles;
        self.x1ops5.lifeid = self.lifeid;
        self.x1ops5.time = gettime();
        scripts\mp\equipment\tac_insert::_id_122E2( 0, 1 );
    }
    else if ( self.x1ops5.team != self.team || self.x1ops5.lifeid != self.lifeid )
        return laser_activate();

    return self.x1ops5;
}

laser_activate()
{
    var_0 = randomint( level.x1ops6[self.team].size );
    var_1 = level.x1ops6[self.team][var_0];
    self.x1ops5.origin = var_1.origin;
    self.x1ops5.angles = var_1.angles;
    self.x1ops5.time = gettime();
    self.x1ops5.team = self.team;
    self.x1ops5.index = -1;
    self.x1ops5.lifeid = self.lifeid;
    return self.x1ops5;
}

tugofwar_hvt_placed()
{
    self endon( "disconnect" );
    scripts\mp\gametypes\br_public.gsc::usb_right();
    self._id_11AA7 = 1;
    self.plotarmor = 1;

    if ( !isalive( self ) )
        scripts\mp\playerlogic::spawnplayer( 0 );

    if ( istrue( self.checkpointstruct ) )
        scripts\mp\gametypes\br.gsc::_id_12A58( self );

    waitframe();
    thread initstandardloadout();
    self.plotarmor = undefined;
    self._id_11AA7 = undefined;
    self freezecontrols( 1 );
    self playerhide();
    scripts\mp\gametypes\br_public.gsc::vehicle_collision_updateinstanceend();
    thread tu0bakechanges();
}

tu0bakechanges()
{
    self endon( "disconnect" );
    scripts\cp_mp\execution::_clearexecution();
    scripts\mp\gametypes\br_pickups.gsc::initplayer();
    var_0 = little_bird_onexitheavydamagestate();
    var_1 = scripts\mp\gametypes\br_gulag.gsc::updatex1stashhud( var_0 );
    scripts\mp\gametypes\br_gulag.gsc::gulagwinnerrespawn( 1, undefined, var_0, 1, var_1, 1, undefined, undefined, undefined, 1 );

    if ( istrue( self.checkpointstruct ) )
        scripts\mp\gametypes\br.gsc::_id_12A58( self );

    level thread scripts\mp\battlechatter_mp::trysaylocalsound( self, "player_respawn" );
    scripts\mp\trials\trial_target_utility::_id_11E8D( "ui_br_transition_type", 0 );
    scripts\mp\damage::resetplayervariables();

    if ( level.spawnprotectiontimer > 0 )
    {
        thread _id_11A36();
        thread _id_11A35();
    }
}

update_volume_flag( var_0, var_1 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );

    if ( !scripts\mp\flags::gameflag( "prematch_done" ) )
        return 0;

    thread playerrespawn();
    return 1;
}

playerrespawn()
{
    level endon( "game_ended" );
    self endon( "disconnect" );

    if ( istrue( level.gameended ) )
        return;

    if ( getdvarint( "scr_bmo_use_spawn_fix", 1 ) == 1 )
        self endon( "brWaitAndSpawnClientComplete" );

    var_0 = scripts\mp\utility\teams::getteamdata( self.team, "teamCount" );

    if ( !istrue( self._id_1238B ) || var_0 == 1 )
    {
        var_1 = 1.0;
        wait( var_1 );
    }

    var_2 = level.brenableagents;
    var_3 = getdvarfloat( "scr_bmo_respawn_predict_hint_time", 5.0 );

    if ( var_2 < var_3 )
        var_2 = var_3;

    if ( level._id_11AB2 != 0 )
        var_2 = 0;

    var_4 = getdvarfloat( "scr_bmo_squad_wiped_stream_time", 3.0 );
    scripts\engine\utility::ent_flag_init( "playerRespawn_intermission_spawned" );
    self.plunder_repositoryclearcountdown = undefined;
    self.plunder_repositoryenableuserestrictions = undefined;

    if ( istrue( self._id_1238B ) || var_0 == 1 )
    {
        var_5 = little_bird_onexitheavydamagestate();
        var_6 = scripts\mp\gametypes\br_gulag.gsc::updatex1stashhud( var_5 );
        thread initusage( 0.0, var_0 > 1 );
        wait( var_4 );
    }
    else if ( !scripts\mp\gametypes\br_public.gsc::prophasclonesleft() )
    {
        scripts\mp\utility\lower_message::setlowermessageomnvar( 9, int( gettime() + var_2 * 1000 ) );
        var_7 = var_2 - var_3;
        var_8 = var_2 - var_7;
        var_9 = var_2 - getdvarfloat( "scr_bmo_respawn_intermission_time", 6.0 );
        thread initusage( var_9 );
        var_10 = scripts\engine\utility::waittill_notify_or_timeout_return( "squad_wipe_death", var_7 );

        if ( var_10 == "squad_wipe_death" )
        {
            var_5 = little_bird_onexitheavydamagestate();
            var_6 = scripts\mp\gametypes\br_gulag.gsc::updatex1stashhud( var_5 );
            thread initusage( 0.0, 1 );
            wait( var_4 );
        }
        else
        {
            thread _id_12B1D();
            var_10 = scripts\engine\utility::waittill_notify_or_timeout_return( "squad_wipe_death", var_8 );

            if ( var_10 == "squad_wipe_death" )
            {
                var_5 = little_bird_onexitheavydamagestate();
                var_6 = scripts\mp\gametypes\br_gulag.gsc::updatex1stashhud( var_5 );
                thread initusage( 0.0, 1 );
                wait( var_4 );
            }
        }
    }

    self notify( "stop_updatePrestreamRespawn" );
    var_5 = little_bird_onexitheavydamagestate();
    var_6 = scripts\mp\gametypes\br_gulag.gsc::updatex1stashhud( var_5 );

    if ( istrue( self._id_1238B ) )
    {
        self._id_1238B = 0;

        if ( var_0 > 1 && !scripts\mp\gametypes\br_public.gsc::prophasclonesleft() )
            scripts\mp\hud_message::showsplash( "bm_your_squad_wiped" );
    }

    scripts\engine\utility::ent_flag_clear( "playerRespawn_intermission_spawned" );
    self.plunder_repositoryclearcountdown = undefined;
    self.plunder_repositoryenableuserestrictions = undefined;
    scripts\mp\utility\lower_message::setlowermessageomnvar( 0 );

    if ( !isalive( self ) )
        scripts\mp\playerlogic::spawnplayer( undefined, 0 );

    scripts\cp_mp\execution::_clearexecution();
    scripts\mp\gametypes\br_pickups.gsc::initplayer();

    if ( scripts\mp\gametypes\br_public.gsc::prophasclonesleft() && isdefined( level.tv_station_boss ) )
        var_5 = scripts\engine\utility::getstruct( level.tv_station_boss, "targetname" );

    scripts\mp\gametypes\br_gulag.gsc::gulagwinnerrespawn( 1, undefined, var_5, 1, var_6, 1 );
    scripts\mp\gametypes\br.gsc::_id_12A58( self );
    level thread scripts\mp\battlechatter_mp::trysaylocalsound( self, "player_respawn" );
    scripts\mp\trials\trial_target_utility::_id_11E8D( "ui_br_transition_type", 0 );
    scripts\mp\damage::resetplayervariables();
    scripts\mp\utility\outline::outlineenableforteam( self, self.team, "outline_depth_rumble", "level_script" );

    if ( level.spawnprotectiontimer > 0 )
    {
        thread _id_11A36();
        thread _id_11A35();
    }
}

initusage( var_0, var_1 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self endon( "spawned_player" );
    self notify( "fadeToGearingUp" );
    self endon( "fadeToGearingUp" );

    if ( isdefined( var_0 ) && var_0 > 0 )
        wait( var_0 );

    thread initteamdatafields();
    var_2 = 1.0;
    wait( var_2 - 0.25 );
    scripts\mp\gametypes\br.gsc::convoy_left_gulag_monitor();

    if ( istrue( var_1 ) )
        scripts\mp\trials\trial_target_utility::_id_11E8D( "ui_br_transition_type", 6 );
    else
        scripts\mp\trials\trial_target_utility::_id_11E8D( "ui_br_transition_type", 2 );

    wait 0.25;

    if ( getdvarint( "scr_bmo_use_spawn_intermission_fix", 1 ) == 1 )
    {
        scripts\mp\gametypes\br_public.gsc::unload_vehicles_on_weapons_free_thread();
        var_3 = little_bird_onexitheavydamagestate();
        scripts\mp\gametypes\br_spectate.gsc::unload_vehicles_on_weapons_free();
        scripts\mp\gametypes\br.gsc::spawnintermission( var_3.origin, var_3.angles );
        scripts\mp\spectating::setdisabled();
        self.plunder_repositoryclearcountdown = var_3.origin;
        self.plunder_repositoryenableuserestrictions = gettime();
        scripts\engine\utility::ent_flag_set( "playerRespawn_intermission_spawned" );
    }
}

initteamdatafields()
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    scripts\mp\gametypes\br_gulag.gsc::gulagfadetoblack();
    self waittill( "spawned_player" );
    scripts\mp\gametypes\br_gulag.gsc::gulagfadefromblack();
}

initstandardloadout()
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self waittill( "spawned_player" );
    scripts\mp\gametypes\br_gulag.gsc::gulagfadefromblack();
}

_id_12B1D()
{
    self endon( "disconnect" );
    self endon( "spawned_player" );
    self endon( "stop_updatePrestreamRespawn" );

    for (;;)
    {
        if ( scripts\engine\utility::ent_flag( "playerRespawn_intermission_spawned" ) )
        {
            var_0 = little_bird_onexitheavydamagestate();
            var_1 = gettime();

            if ( var_1 - self.plunder_repositoryenableuserestrictions >= getdvarfloat( "scr_bmo_spawn_fallback_hint_delay", 2.0 ) * 1000 )
            {
                var_0 = little_bird_onexitheavydamagestate();
                var_2 = scripts\mp\gametypes\br_gulag.gsc::updatex1stashhud( var_0 );
            }
        }
        else
        {
            var_0 = little_bird_onexitheavydamagestate();
            var_2 = scripts\mp\gametypes\br_gulag.gsc::updatex1stashhud( var_0 );
        }

        wait 1.0;
    }
}

_id_11A36()
{
    self endon( "death_or_disconnect" );
    self endon( "remove_spawn_protection" );
    scripts\engine\utility::_id_12E3F( "vehicle_enter", "weapon_fired" );
    scripts\mp\gametypes\common.gsc::removespawnprotection();
}

_id_11A35()
{
    self endon( "death_or_disconnect" );
    self endon( "remove_spawn_protection" );

    while ( !self isonground() )
        waitframe();

    scripts\mp\gametypes\common.gsc::removespawnprotection();
}

usingtacmap( var_0 )
{
    return 1;
}

_id_122C5( var_0 )
{
    return istrue( var_0.br_infilstarted ) && scripts\mp\flags::gameflag( "prematch_done" );
}

onplayerkilled( var_0 )
{
    if ( !istrue( level.br_prematchstarted ) )
        return;

    if ( level.gameended )
        return;

    var_1 = var_0.victim;
    var_2 = var_0.attacker;
    _debug_rooftopobjstart::relic_squadlink_turn_team_headobjectives( var_0 );

    if ( !isdefined( var_2 ) || !isplayer( var_2 ) || !isdefined( var_1 ) )
        return;

    if ( var_1 == var_2 )
        return;

    if ( isdefined( var_2.team ) )
    {
        var_3 = level.convoy_handle_stuck_compromise.place_weapons_at_pos;

        if ( istrue( var_1.viphud_setupvisibility ) )
            var_3 = var_3 + level.convoy_handle_stuck_compromise.pkg_lbl_vo;

        if ( istrue( var_2.viphud_setupvisibility ) )
            var_3 = var_3 + level.convoy_handle_stuck_compromise.place_bad_place_until_flag;

        level scripts\mp\gamescore::giveteamscoreforobjective( var_2.pers["team"], var_3, 0 );
    }
}

onplayerconnect( var_0 )
{
    var_0 endon( "disconnect" );
    var_0 waittill( "spawned_player" );
    scripts\mp\utility\outline::outlineenableforteam( var_0, var_0.team, "outline_depth_rumble", "level_script" );
}

_locationselectioninterrupt()
{

}

init_locations()
{
    yaw_delta( "dam", 1 );
    yaw_delta( "farm", 1 );
    yaw_delta( "prom_east", 1 );
    yaw_delta( "downtown", 1 );
    yaw_delta( "factory", 1 );
    yaw_delta( "boneyard", 1 );
    yaw_delta( "salt_mines", 1 );
    yaw_delta( "stadium", 1 );
}

yaw_delta( var_0, var_1 )
{
    if ( !isdefined( level.convoy_handle_stuck_compromise.ai_flash_swap ) )
        level.convoy_handle_stuck_compromise.ai_flash_swap = [];

    var_1 = getdvarint( "scr_brRumble_location_weight_" + var_0, var_1 );
    level.convoy_handle_stuck_compromise.ai_flash_swap[var_0] = var_1;
}

_id_11B6A()
{
    if ( level.mapname != "mp_don4" )
        return "default";

    if ( isdefined( level.convoy_handle_stuck_compromise._id_1251F ) && level.convoy_handle_stuck_compromise._id_1251F != "random" )
    {
        foreach ( var_2, var_1 in level.convoy_handle_stuck_compromise.ai_flash_swap )
        {
            if ( level.convoy_handle_stuck_compromise._id_1251F == var_2 )
                return var_2;
        }
    }

    var_3 = 0;

    foreach ( var_1 in level.convoy_handle_stuck_compromise.ai_flash_swap )
        var_3 = var_3 + var_1;

    var_6 = randomintrange( 0, var_3 );

    foreach ( var_2, var_1 in level.convoy_handle_stuck_compromise.ai_flash_swap )
    {
        if ( var_6 < var_1 )
            return var_2;

        var_6 = var_6 - var_1;
    }
}

little_bird_mg_givetakegunnerturrettimeout( var_0 )
{
    var_1 = spawnstruct();
    var_1._id_12520 = "default";
    var_1.dropcpcratefromscriptedheli = ( 0, 0, 0 );
    var_1.circle_radius = 12500;
    var_1._id_12192 = 0;
    var_1._id_12193 = 180;
    var_1._id_121EF = 2500;
    var_1._id_121F0 = 2500;
    var_1._id_12195 = 0;
    var_1._id_12194 = 30;
    var_1._id_121C0 = 0.9;
    var_1._id_121BF = 0.99;
    var_1._id_121DB = 0;
    var_1._id_12230 = 1000;
    var_1._id_1222F = 3000;
    var_1._id_12330 = ( 0, 0, 0 );
    var_1._id_1232F = ( 0, 0, 0 );

    switch ( var_0 )
    {
        case "dam":
            var_1._id_12520 = var_0;
            var_1.dropcpcratefromscriptedheli = ( -22138, 45889, 0 );
            var_1.circle_radius = 13000;
            var_1._id_12192 = 30;
            var_1._id_12193 = 210;
            var_1._id_121EF = 3500;
            var_1._id_121F0 = 3500;
            var_1._id_121C0 = 0.85;
            var_1._id_121BF = 0.95;
            var_1._id_12330 = ( 17027, -35357, 1505 );
            var_1._id_1232F = ( 21, 63, 0 );
            break;
        case "farm":
            var_1._id_12520 = var_0;
            var_1.dropcpcratefromscriptedheli = ( 49383, -16549, 0 );
            var_1.circle_radius = 12000;
            var_1._id_12192 = 25;
            var_1._id_12193 = 205;
            var_1._id_121EF = 2500;
            var_1._id_121F0 = 2500;
            var_1._id_12330 = ( 17027, -35357, 1505 );
            var_1._id_1232F = ( 21, 63, 0 );
            break;
        case "prom_east":
            var_1._id_12520 = var_0;
            var_1.dropcpcratefromscriptedheli = ( 1241, -23018, 0 );
            var_1.circle_radius = 12000;
            var_1._id_12192 = 0;
            var_1._id_12193 = 180;
            var_1._id_121EF = 2500;
            var_1._id_121F0 = 2500;
            var_1._id_12330 = ( 17027, -35357, 1505 );
            var_1._id_1232F = ( 21, 63, 0 );
            break;
        case "downtown":
            var_1._id_12520 = var_0;
            var_1.dropcpcratefromscriptedheli = ( 24615, -14750, 0 );
            var_1.circle_radius = 11500;
            var_1._id_12192 = 90;
            var_1._id_12193 = 270;
            var_1._id_121EF = 2500;
            var_1._id_121F0 = 2500;
            var_1._id_12330 = ( 17027, -35357, 1505 );
            var_1._id_1232F = ( 21, 63, 0 );
            break;
        case "factory":
            var_1._id_12520 = var_0;
            var_1.dropcpcratefromscriptedheli = ( -7432, 8413, 0 );
            var_1.circle_radius = 12500;
            var_1._id_12192 = 90;
            var_1._id_12193 = 270;
            var_1._id_121EF = 2500;
            var_1._id_121F0 = 2500;
            var_1._id_12330 = ( 17027, -35357, 1505 );
            var_1._id_1232F = ( 21, 63, 0 );
            break;
        case "boneyard":
            var_1._id_12520 = var_0;
            var_1.dropcpcratefromscriptedheli = ( -27719, -11191, 0 );
            var_1.circle_radius = 12000;
            var_1._id_12192 = 95;
            var_1._id_12193 = 275;
            var_1._id_121EF = 2500;
            var_1._id_121F0 = 2500;
            var_1._id_12330 = ( 17027, -35357, 1505 );
            var_1._id_1232F = ( 21, 63, 0 );
            break;
        case "salt_mines":
            var_1._id_12520 = var_0;
            var_1.dropcpcratefromscriptedheli = ( 30873, 35398, 0 );
            var_1.circle_radius = 14000;
            var_1._id_12192 = 165;
            var_1._id_12193 = 345;
            var_1._id_121EF = 2500;
            var_1._id_121F0 = 2500;
            var_1._id_12330 = ( 17027, -35357, 1505 );
            var_1._id_1232F = ( 21, 63, 0 );
            break;
        case "stadium":
            var_1._id_12520 = var_0;
            var_1.dropcpcratefromscriptedheli = ( 29292, 2787, 0 );
            var_1.circle_radius = 12250;
            var_1._id_12192 = 135;
            var_1._id_12193 = 315;
            var_1._id_121EF = 2500;
            var_1._id_121F0 = 2500;
            var_1._id_12330 = ( 17027, -35357, 1505 );
            var_1._id_1232F = ( 21, 63, 0 );
            break;
        default:
            break;
    }

    return var_1;
}

_maphint_phonescriptableused()
{

}

_id_12CE8( var_0 )
{
    var_1 = spawnstruct();
    var_2 = scripts\engine\utility::getstruct( "launch_code_drop_button", "targetname" );
    var_1.origin = var_2.origin + ( 0, 0, 50000 );

    if ( isdefined( var_0 ) )
        var_2.origin = var_0;

    var_3 = scripts\mp\gametypes\br_gametype_truckwar.gsc::_id_12D1F( var_1 );

    if ( isdefined( var_3 ) )
        level thread scripts\mp\gametypes\br_gametype_truckwar.gsc::_id_12943( var_3, var_2.origin, var_3.angles, 1 );
}

_maphint_offerscriptableused()
{

}

stim_crate_use_alt()
{
    var_0 = "tie";
    var_0 = scripts\mp\gamescore::gethighestscoringteam();
    logstring( "[KEY_MOMENT] time limit, win: " + var_0 );
    thread scripts\mp\gametypes\br.gsc::brendgame( var_0, game["end_reason"]["time_limit_reached"] );
}

_id_1299D()
{
    foreach ( var_1 in level.players )
        scripts\mp\utility\outline::outlineenableforteam( var_1, var_1.team, "outline_depth_rumble", "level_script" );
}

_maphint_computerscriptableused()
{

}

_initsalesdiscount()
{

}
