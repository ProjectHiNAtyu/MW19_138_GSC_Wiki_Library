// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    if ( !getdvarint( "scr_br_alt_mode_bblitz", 0 ) )
        return;

    level.brskipplayerkillcams = getdvarint( "scr_br_alt_mode_bblitz_goal", 3 );
    level thread fadetoblackforxsec();
}

fadetoblackforxsec()
{
    level endon( "game_ended" );
    level waittill( "prematch_done" );
    var_0 = getarraykeys( level.teamdata );

    foreach ( var_2 in var_0 )
        level.teamdata[var_2]["bblitzCounter"] = 0;
}

brsingleuse( var_0 )
{
    if ( !getdvarint( "scr_br_alt_mode_bblitz", 0 ) )
        return;

    var_1 = var_0.team;
    var_2 = scripts\mp\utility\teams::getteamdata( var_1, "bblitzCounter" ) + 1;
    scripts\mp\utility\teams::setteamdata( var_1, "bblitzCounter", var_2 );

    if ( var_2 == level.brskipplayerkillcams )
    {
        scripts\mp\utility\teams::setteamdata( var_1, "bblitzCounter", 0 );
        var_3 = spawnstruct();
        var_3.heli_lookat_monitor = 0;
        var_4 = scripts\mp\gametypes\br_pickups.gsc::getitemdroporiginandangles( var_3, var_0.origin, ( 0, 0, 0 ), undefined, 0, 0, 35 );
        var_5 = scripts\mp\gametypes\br_pickups.gsc::spawnpickup( "brloot_blueprintextract_tablet", var_4, 0, 1 );
    }
}
