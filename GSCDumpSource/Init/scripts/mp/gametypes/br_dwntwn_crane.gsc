// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

hasnolethalequipment()
{
    level endon( "game_ended" );
    haspassedsquadleader();
    level thread haspackage();
}

haspassedsquadleader()
{
    level.hasnolethalequipment = getent( "crane_arm", "targetname" );
    level.hasnolethalequipment.collision = getent( "crane_collision", "targetname" );
    level.hasnolethalequipment.patch_weapons_on_rack_cleararea = getent( "crane_hook", "targetname" );
    level.hasnolethalequipment.tread_sfx = getent( "crane_platform", "targetname" );
    level.hasnolethalequipment.collision linkto( level.hasnolethalequipment );
    level.hasnolethalequipment.trigger = getent( "crane_trigger", "targetname" );
    level.hasnolethalequipment.trigger makeusable();
    level.hasnolethalequipment.trigger show();
    level.hasnolethalequipment.trigger sethintdisplayfov( 360 );
    level.hasnolethalequipment.trigger setusefov( 360 );
    level.hasnolethalequipment.trigger sethintdisplayrange( 100 );
    level.hasnolethalequipment.trigger setuserange( 100 );
    var_0 = getent( level.hasnolethalequipment.patch_weapons_on_rack_cleararea.target, "targetname" );
    var_1 = getent( var_0.target, "targetname" );
    level.hasnolethalequipment.spawn_sentries_from_targetname = var_0;
    level.hasnolethalequipment.intermissionspawnorigin = var_1;
    level.hasnolethalequipment.spawn_sentries_from_targetname linkto( level.hasnolethalequipment );
    level.hasnolethalequipment.intermissionspawnorigin linkto( level.hasnolethalequipment );
}

haspackage()
{
    level endon( "game_ended" );
    level.hasnolethalequipment endon( "death" );
    level.hasnolethalequipment endon( "deleted" );
    level.hasnolethalequipment.trigger endon( "deaht" );

    for (;;)
    {
        if ( isdefined( level.hasnolethalequipment.trigger ) )
        {
            level.hasnolethalequipment.trigger.in_use = undefined;
            level.hasnolethalequipment.trigger makeusable();
            level.hasnolethalequipment.trigger sethintstring( &"MP/BR_INTERACTABLES_CRANE_PROMPT" );
            level.hasnolethalequipment.trigger waittill( "trigger", var_0 );
            level.hasnolethalequipment.trigger.in_use = 1;
            level.hasnolethalequipment.trigger makeunusable();
            level.hasnolethalequipment.trigger sethintstring( "" );
            var_0 playlocalsound( "ammo_crate_use" );
        }

        wait 5;
        level.hasnolethalequipment.tread_sfx movez( 1808, 5, 1, 1 );
        wait 7;
        level.hasnolethalequipment.tread_sfx linkto( level.hasnolethalequipment.patch_weapons_on_rack_cleararea );
        level.hasnolethalequipment.patch_weapons_on_rack_cleararea moveto( level.hasnolethalequipment.intermissionspawnorigin.origin, 5, 1, 1 );
        wait 7;
        level.hasnolethalequipment.patch_weapons_on_rack_cleararea linkto( level.hasnolethalequipment );
        level.hasnolethalequipment rotateyaw( 135, 10, 1, 1 );
        wait 12;

        if ( isdefined( level.hasnolethalequipment.trigger ) )
        {
            level.hasnolethalequipment.trigger.in_use = undefined;
            level.hasnolethalequipment.trigger makeusable();
            level.hasnolethalequipment.trigger sethintstring( &"MP/BR_INTERACTABLES_CRANE_PROMPT" );
            level.hasnolethalequipment.trigger waittill( "trigger", var_0 );
            level.hasnolethalequipment.trigger.in_use = 1;
            level.hasnolethalequipment.trigger makeunusable();
            level.hasnolethalequipment.trigger sethintstring( "" );
            var_0 playlocalsound( "ammo_crate_use" );
        }

        wait 5;
        level.hasnolethalequipment rotateyaw( -135, 10, 1, 1 );
        wait 12;
        level.hasnolethalequipment.patch_weapons_on_rack_cleararea unlink();
        level.hasnolethalequipment.patch_weapons_on_rack_cleararea moveto( level.hasnolethalequipment.spawn_sentries_from_targetname.origin, 5, 1, 1 );
        wait 7;
        level.hasnolethalequipment.tread_sfx unlink();
        level.hasnolethalequipment.tread_sfx movez( -1808, 5, 1, 1 );
        wait 7;
    }
}
