// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

#using_animtree("vehicles");

main( var_0, var_1, var_2 )
{
    scripts\common\vehicle_build::build_template( "blima", var_0, var_1, var_2 );
    scripts\common\vehicle_build::build_localinit( ::init_local );
    scripts\common\vehicle_build::build_deathmodel( "veh8_mil_air_blima" );
    var_3 = [];
    var_3["vehicle_battle_hind"] = "vfx/core/expl/helicopter_explosion_hind_chernobyl.vfx";
    var_3["vehicle_battle_hind_low"] = "vfx/core/expl/helicopter_explosion_hind_chernobyl.vfx";
    var_3["vehicle_battle_hind_no_lod"] = "vfx/core/expl/helicopter_explosion_hind_chernobyl.vfx";
    var_3["vehicle_battle_hind_alpha_rotors"] = "vfx/core/expl/helicopter_explosion_hind_chernobyl.vfx";
    var_4 = [];
    var_4["vehicle_battle_hind"] = "vfx/core/expl/aerial_explosion_hind_chernobyl.vfx";
    var_4["vehicle_battle_hind_low"] = "vfx/core/expl/aerial_explosion_hind_chernobyl.vfx";
    var_4["vehicle_battle_hind_no_lod"] = "vfx/core/expl/aerial_explosion_hind_chernobyl.vfx";
    var_4["vehicle_battle_hind_alpha_rotors"] = "vfx/core/expl/aerial_explosion_hind_chernobyl.vfx";
    var_5 = var_3[var_0];
    scripts\common\vehicle_build::build_deathfx( "vfx/core/expl/grenadeexp_default.vfx", "tag_engine_left", "hind_helicopter_hit", undefined, undefined, undefined, 0.2, 1, undefined );
    scripts\common\vehicle_build::build_deathfx( "vfx/core/expl/grenadeexp_default.vfx", "tail_rotor_jnt", "hind_helicopter_secondary_exp", undefined, undefined, undefined, 0.5, 1, undefined );
    scripts\common\vehicle_build::build_deathfx( "vfx/core/expl/fire_smoke_trail_l.vfx", "tail_rotor_jnt", "hind_helicopter_dying_loop", 1, 0.05, 1, 0.5, 1, undefined );
    scripts\common\vehicle_build::build_treadfx();
    scripts\common\vehicle_build::build_treadfx( var_2, "default", "vfx/code/tread/heli_dust_default.vfx", 1 );
    scripts\common\vehicle_build::build_life( 3000, 2800, 3100 );
    scripts\common\vehicle_build::build_team( "allies" );
    scripts\common\vehicle_build::build_aianims( ::setanims, ::set_vehicle_anims, "blima" );
    var_6 = randomfloatrange( 0, 1 );
    scripts\common\vehicle_build::build_light( var_2, "cockpit_red_cargo01", "tag_light_cargo01", "vfx/misc/aircraft_light_cockpit_red", "interior", 0.0 );
    scripts\common\vehicle_build::build_light( var_2, "cockpit_red_cargo02", "tag_light_cargo02", "vfx/misc/aircraft_light_cockpit_red", "interior", 0.0 );
    scripts\common\vehicle_build::build_light( var_2, "cockpit_blue_cockpit01", "tag_light_cockpit01", "vfx/misc/aircraft_light_cockpit_blue", "interior", 0.1 );
    scripts\common\vehicle_build::build_light( var_2, "white_blink_belly", "tag_light_belly", "vfx/core/vehicles/aircraft_light_white_blink_lit", "running", var_6 );
    scripts\common\vehicle_build::build_light( var_2, "red_blink_tail", "tag_light_tail", "vfx/core/vehicles/aircraft_light_red_blink_lit", "running", var_6 );
    scripts\common\vehicle_build::build_light( var_2, "wingtip_green", "tag_light_L_wing", "vfx/core/vehicles/aircraft_light_wingtip_red_lit", "running", var_6 );
    scripts\common\vehicle_build::build_light( var_2, "wingtip_red", "tag_light_R_wing", "vfx/core/vehicles/aircraft_light_wingtip_green_lit", "running", var_6 );
    scripts\common\vehicle_build::build_light( var_2, "spot", "tag_passenger", "vfx/misc/aircraft_light_hindspot", "spot", 0.0 );
    scripts\common\vehicle_build::build_unload_groups( ::unload_groups );
    scripts\common\vehicle_build::build_bulletshield( 1 );
    scripts\common\vehicle_build::build_is_helicopter();

    if ( scripts\common\utility::issp() )
        scripts\common\vehicle_build::build_drive( %mi28_rotors, undefined, 0, 3.0 );
    else
        scripts\common\vehicle_build::build_drive( %bh_rotors, undefined, 0, 3.0 );
}

setup_lights( var_0 )
{

}

init_local()
{
    self.unload_hover_offset = 170;
    self.script_badplace = 0;
    scripts\common\vehicle::vehicle_lights_on( "running" );
    self.vehicleanimalias = "blima_ground";
    thread handle_scriptable_vfx();

    if ( self.classname == "script_vehicle_blima_hi_res" )
        self attach( "veh8_mil_air_blima_interior_vm" );
}

handle_scriptable_vfx()
{
    self endon( "death" );

    if ( scripts\common\utility::issp() || scripts\common\utility::iscp() )
    {
        scripts\engine\utility::flag_wait( "scriptables_ready" );
        self setscriptablepartstate( "engine", "on" );
    }
}

#using_animtree("generic_human");

setanims()
{
    var_0 = [];

    for ( var_1 = 0; var_1 < 8; var_1++ )
        var_0[var_1] = spawnstruct();

    var_0[0].idle = %vh_blima_rappel_pilot;
    var_0[0].idle_anim = "vh_blima_rappel_pilot";
    var_0[1].idle = %vh_blima_rappel_copilot;
    var_0[1].idle_anim = "vh_blima_rappel_copilot";
    var_0[2].idle = %sdr_mp_veh_blima_ground_l1_idle;
    var_0[3].idle = %sdr_mp_veh_blima_ground_l2_idle;
    var_0[4].idle = %sdr_mp_veh_blima_ground_l3_idle;
    var_0[5].idle = %sdr_mp_veh_blima_ground_r1_idle;
    var_0[6].idle = %sdr_mp_veh_blima_ground_r2_idle;
    var_0[7].idle = %sdr_mp_veh_blima_ground_r3_idle;
    var_0[0].sittag = "tag_pilot1";
    var_0[1].sittag = "tag_pilot2";
    var_0[2].sittag = "tag_guy0";
    var_0[3].sittag = "tag_guy1";
    var_0[4].sittag = "tag_guy2";
    var_0[5].sittag = "tag_guy3";
    var_0[6].sittag = "tag_guy4";
    var_0[7].sittag = "tag_guy6";
    var_0[2].getout = %sdr_mp_veh_blima_ground_l1_exit;
    var_0[3].getout = %sdr_mp_veh_blima_ground_l2_exit;
    var_0[4].getout = %sdr_mp_veh_blima_ground_l3_exit;
    var_0[5].getout = %sdr_mp_veh_blima_ground_r1_exit;
    var_0[6].getout = %sdr_mp_veh_blima_ground_r2_exit;
    var_0[7].getout = %sdr_mp_veh_blima_ground_r3_exit;
    return var_0;
}

#using_animtree("vehicles");

set_vehicle_anims( var_0 )
{
    for ( var_1 = 0; var_1 < var_0.size; var_1++ )
        var_0[var_1].vehicle_getoutanim = %vh_blima_rappel_heli_drop;

    return var_0;
}

unload_groups()
{
    var_0 = [];
    var_0["left"] = [];
    var_0["right"] = [];
    var_0["both"] = [];
    var_0["left"][var_0["left"].size] = 3;
    var_0["left"][var_0["left"].size] = 6;
    var_0["left"][var_0["left"].size] = 8;
    var_0["left"][var_0["left"].size] = 9;
    var_0["right"][var_0["right"].size] = 2;
    var_0["right"][var_0["right"].size] = 4;
    var_0["right"][var_0["right"].size] = 5;
    var_0["right"][var_0["right"].size] = 7;
    var_0["both"][var_0["both"].size] = 2;
    var_0["both"][var_0["both"].size] = 3;
    var_0["both"][var_0["both"].size] = 4;
    var_0["both"][var_0["both"].size] = 5;
    var_0["both"][var_0["both"].size] = 6;
    var_0["both"][var_0["both"].size] = 7;
    var_0["both"][var_0["both"].size] = 8;
    var_0["both"][var_0["both"].size] = 9;
    var_0["default"] = var_0["both"];
    return var_0;
}
